"use strict";angular.module("crowdFundingApp",["ngRoute","ngCookies","ngDialog"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("crowdFundingApp").directive("progressBar",function(){return{restrict:"E",scope:{maxValue:"@",currentValue:"@"},template:'<div class="progress-bar"><div class="progress"></div></div>',replace:!0,link:function(a,b){var c=b.find(".progress"),d=function(a){a>100&&(a=100),c.css({width:a+"%"}),100==a&&c.addClass("complete")},e=function(a,b){return parseInt(b)/parseInt(a)*100};a.$watch("currentValue",function(b,c){b!=c&&d(e(a.maxValue,b))}),d(e(a.maxValue,a.currentValue))}}}),angular.module("crowdFundingApp").factory("LocalStorage",["$window","$cookieStore",function(a,b){function c(){try{return"localStorage"in a&&null!==a.localStorage&&(a.localStorage.setItem("___test___",1),a.localStorage.removeItem("___test___"),!0)}catch(a){return!1}}function d(d,e){c()?a.localStorage.setItem(d,e):b.put(d,e)}function e(d){return c()?a.localStorage.getItem(d):b.get(d)}function f(d){c()?a.localStorage.removeItem(d):b.remove(d)}return{setItem:d,getItem:e,removeItem:f}}]),angular.module("crowdFundingApp").controller("MainCtrl",["$scope","LocalStorage","ngDialog",function(a,b,c){function d(){var b=(new Date).getTime(),c=a.donationCollectionDeadline.getTime();a.donationExpired=b>c;var d=a.getReceivedDonation();a.donationComplete=d>=a.requiredDonation}a.requiredDonation=2e3,a.donationCollectionDeadline=new Date("10-20-2016 11:59 PM"),a.donationAmount=50,a.getReceivedDonation=function(){return parseInt(b.getItem("DONATION_RECEIVED"))||0},a.getDonorsCount=function(){return parseInt(b.getItem("DONORS_COUNT"))||0},a.getPendingAmount=function(){return a.requiredDonation-a.getReceivedDonation()},a.submitDonation=function(c){b.setItem("DONATION_RECEIVED",a.getReceivedDonation()+parseInt(c)),b.setItem("DONORS_COUNT",a.getDonorsCount()+1)},a.shareOnSocialMedia=function(){c.open({template:"views/share-dialog.html",controller:"ShareCtrl"})},a.daysLeftForDonationEnd=function(){var b=(new Date).getTime(),c=a.donationCollectionDeadline.getTime(),d=864e5;if(!a.donationExpired)var e=Math.ceil((c-b)/d);return e||0},a.whyDonate=function(){c.open({template:"views/why-donate.html"})},a.saveForLater=function(){c.open({template:'<div class="popup-message">Saved</div>',plain:!0,showClose:!1,controller:["$scope","$timeout",function(a,b){b(function(){a.closeThisDialog()},1e3)}]})},this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],d()}]),angular.module("crowdFundingApp").controller("ShareCtrl",["$scope","LocalStorage",function(a,b){a.shareOnFB=function(){var c=parseInt(b.getItem("FB_POSTS"))||0;b.setItem("FB_POSTS",++c),a.closeThisDialog()},a.shareOnTweeter=function(){var c=parseInt(b.getItem("TWITTER_POSTS"))||0;b.setItem("TWITTER_POSTS",++c),a.closeThisDialog()}}]),angular.module("crowdFundingApp").run(["$templateCache",function(a){a.put("views/main.html",'<section class="donation-widget"> <header class="pending-donation-message"> <label ng-if="!donationComplete"> <span class="bold">${{getPendingAmount()}}</span> still needed for this project </label> <label ng-if="donationComplete"> <span class="bold">${{getReceivedDonation()}}</span> received for this project </label> </header> <progress-bar max-value="{{requiredDonation}}" current-value="{{getReceivedDonation()}}"></progress-bar> <section class="details-section" ng-if="!donationComplete"> <h3 class="details-header"><span class="highlight bold">Only {{daysLeftForDonationEnd()}} days left</span> to fund this project.</h3> <p class="details-body" ng-if="!donationExpired && getDonorsCount() > 0"> Join the {{getDonorsCount()}} other donors who have already supported this project. Every dollar helps. </p> <p class="details-body" ng-if="!donationExpired && getDonorsCount() == 0"> Be the first donor to support this project. Every dollar helps. </p> <p class="details-body" ng-if="donationExpired"> This donation has expired. Thanks for showing interest in helping us. </p> <form class="donation-form"> <i class="placeholder">$</i> <input class="from-input" ng-disabled="donationExpired" type="number" value="50" ng-model="donationAmount"> <button class="btn btn-submit" ng-disabled="donationExpired" ng-click="submitDonation(donationAmount)">Give Now</button> </form> <a class="link" ng-click="whyDonate()">Why give $50?</a> </section> <section class="details-section" ng-if="donationComplete"> <h3 class="details-header">We have received our required donation. Thanks for showing interest.</h3> </section> <footer class="widget-footer"> <button class="btn" ng-click="saveForLater()">Save for later</button> <button class="btn" ng-click="shareOnSocialMedia()">Tell your friends</button> </footer> </section>'),a.put("views/share-dialog.html",'<div class="modal share-modal"> <header class="modal-header"> <h2>Help share the word</h2> </header> <section class="modal-body"> <h3>Your share could help raise $50!</h3> <div class="share-buttons"> <button class="btn btn-fb" ng-click="shareOnFB()"><i class="fa fa-facebook-official"></i> Share</button> <button class="btn btn-tweeter" ng-click="shareOnTweeter()"><i class="fa fa-twitter"></i> Tweet</button> </div> </section> </div>'),a.put("views/why-donate.html",'<div class="modal why-donate-modal"> <header class="modal-header"> <h2>Why give $50?</h2> </header> <section class="modal-body"> <h3>Your donation will help us build our idea and present it to the world.</h3> </section> </div>')}]);